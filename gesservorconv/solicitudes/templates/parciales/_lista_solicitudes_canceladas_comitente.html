<div class="table-responsive">
    <table class="table table-striped table-bordered align-middle">
        <thead id="table-head-cancelado" hx-preserve>
            <tr class="table-primary" id="table-row-cancelado" hx-preserve>
                <th scope="col" class="col-2 text-center" id="table-col-id-cancelado" hx-preserve>
                    <i class="fa-solid fa-hashtag" id="hashtag-cancelado" hx-preserve></i>
                </th>
                <th scope="col" class="col text-center" id="table-col-nombre-cancelado" hx-preserve>
                    Nombre
                </th>
                <th scope="col" class="col-3 text-center" id="table-col-acciones-cancelado" hx-preserve>
                    Acciones
                </th>
            </tr>
        </thead>
        <tbody>
            {% widthratio pagina_cancelado.number|add:"-1" 1 pagina_cancelado.paginator.per_page as inicio_pagina %}
            {% for solicitud in pagina_cancelado %}
            <tr>
                <th scope="row" class="text-center">{{ inicio_pagina|add:forloop.counter }}</th>
                <td>
                    {{ solicitud.nombre_solicitud }}
                </td>
                <td class="text-start">
                    <button type="button" class="btn btn-secondary m-1"
                        data-bs-toggle="modal" data-bs-target="#solicitud-cancelada{{ inicio_pagina|add:forloop.counter }}"
                    >
                        <i class="fa-solid fa-circle-info"></i>
                    </button>
                    {% if solicitud.debe_decidir_comitente is False %}
                    <a class="btn btn-dark m-1"
                        href="{% url 'solicitudes:reporte_solicitud_comitente' solicitud.id_solicitud %}"
                    >
                        <i class="fa-solid fa-print"></i>
                    </a>
                    {% endif %}
                    <div class="modal fade" id="solicitud-cancelada{{ inicio_pagina|add:forloop.counter }}"
                        aria-labelledby="titulo-solicitud-cancelada{{ inicio_pagina|add:forloop.counter }}"
                        aria-hidden="true" tabindex="-1" data-bs-backdrop="static"
                    >
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                            <div class="modal-content">
                                <div class="modal-header clearfix">
                                    <h3 class="modal-title fs-5 float-start me-auto"
                                        id="titulo-solicitud-cancelada{{ inicio_pagina|add:forloop.counter }}"
                                    >Solicitud {{ solicitud.id_solicitud }}</h3>
                                    <button type="button" class="btn float-end ms-auto"
                                        data-bs-dismiss="modal" aria-label="Close"
                                    >
                                        <i class="fa-solid fa-xmark fa-xl"></i>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <p class="text-center m-0"><b>Nombre</b></p>
                                    <p>{{ solicitud.nombre_solicitud }}</p>
                                    <p class="text-center m-0"><b>Descripción</b></p>
                                    <p>{{ solicitud.descripcion_solicitud }}</p>
                                    <p class="text-center m-0"><b>Creación</b></p>
                                    <p id="tiempo-creacion-{{ solicitud.id_solicitud }}">
                                        {{ solicitud.tiempo_creacion|date:"c" }}
                                    </p>
                                    <p class="text-center m-0"><b>Comitentes</b></p>
                                    <ul class="list-group mb-3">
                                        {% for comitente_en_solicitud in solicitud.comitentes_en_solicitud %}
                                        <li class="list-group-item">{{ comitente_en_solicitud }}</li>
                                        {% endfor %}
                                    </ul>
                                    {% if solicitud.responsables_en_solicitud %}
                                    <p class="text-center m-0"><b>Responsables Técnicos</b></p>
                                    <ul class="list-group mb-3">
                                        {% for responsable_en_solicitud in solicitud.responsables_en_solicitud %}
                                        {% if responsable_en_solicitud is not None %}
                                        <li class="list-group-item">{{ responsable_en_solicitud }}</li>
                                        {% endif %}
                                        {% endfor %}
                                    </ul>
                                    {% endif %}
                                </div>
                                <div class="modal-footer">
                                    <input type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal" value="Cerrar"
                                    >
                                    {% if solicitud.debe_decidir_comitente is False %}
                                    <a class="btn btn-dark"
                                        href="{% url 'solicitudes:reporte_solicitud_comitente' solicitud.id_solicitud %}"
                                    >Imprimir</a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>                      
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3" class="text-center">No se encuentra solicitudes de servicio</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div class="clearfix">
    <div class="float-start ms-2">
        <p class="my-2">
            Solicitudes {{ pagina_cancelado.start_index }}-{{ pagina_cancelado.end_index }}
            de {{ pagina_cancelado.paginator.count }}
        </p>
    </div>
    <div class="float-end me-2">
        <ul class="pagination justify-content-center mb-1">
            {% if pagina_cancelado.has_previous %}
                <li class="page-item">
                    <input type="button" class="page-link"
                        value="1"
                        hx-get="{% url 'solicitudes:lista_solicitudes_comitente' %}?pagina=1"
                        hx-include="#id_buscar_nombre, #primera-pagina"
                        hx-vals='{"tipo": "cancelado", "por_pagina": {{ pagina_cancelado.paginator.per_page }}}'
                        hx-target="#resultados-cancelado"
                        hx-indicator="#indicador-cancelado"
                    >
                </li>
                {% if pagina_cancelado.number > 2 %}
                    {% if pagina_cancelado.number > 3 %}
                        <li class="page-item disabled">
                            <input type="button" class="page-link" tabindex="-1"
                                aria-disabled="true" value="..."
                            >
                        </li>
                    {% endif %}
                    <li class="page-item">
                        <input type="button" class="page-link"
                            value="{{ pagina_cancelado.previous_page_number }}"
                            hx-get="{% url 'solicitudes:lista_solicitudes_comitente' %}?pagina={{ pagina_cancelado.previous_page_number }}"
                            hx-include="#id_buscar_nombre, #pagina-anterior"
                            hx-vals='{"tipo": "cancelado", "por_pagina": {{ pagina_cancelado.paginator.per_page }}}'
                            hx-target="#resultados-cancelado"
                            hx-indicator="#indicador-cancelado"
                        >
                    </li>
                {% endif %}
            {% endif %}
            <li class="page-item active">
                <input type="button" class="page-link"
                    aria-current="page" value="{{ pagina_cancelado.number }}"
                    hx-get="{% url 'solicitudes:lista_solicitudes_comitente' %}?pagina={{ pagina_cancelado.number }}"
                    hx-include="#id_buscar_nombre, #pagina-actual"
                    hx-vals='{"tipo": "cancelado", "por_pagina": {{ pagina_cancelado.paginator.per_page }}}'
                    hx-target="#resultados-cancelado"
                    hx-indicator="#indicador-cancelado"
                >
            </li>
            {% if pagina_cancelado.has_next %}
                {% if pagina_cancelado.next_page_number < pagina_cancelado.paginator.num_pages %}
                    <li class="page-item">
                        <input type="button" class="page-link"
                            value="{{ pagina_cancelado.next_page_number }}"
                            hx-get="{% url 'solicitudes:lista_solicitudes_comitente' %}?pagina={{ pagina_cancelado.next_page_number }}"
                            hx-include="#id_buscar_nombre, #pagina-siguiente, #id_cancelado_pagina"
                            hx-vals='{"tipo": "cancelado", "por_pagina": {{ pagina_cancelado.paginator.per_page }}}'
                            hx-target="#resultados-cancelado"
                            hx-indicator="#indicador-cancelado"
                        >
                    </li>
                    {% if pagina_cancelado.next_page_number|add:"1" < pagina_cancelado.paginator.num_pages %}
                        <li class="page-item disabled">
                            <input type="button" class="page-link" tabindex="-1"
                                aria-disabled="true" value="..."
                            >
                        </li>
                    {% endif %}
                {% endif %}
                <li class="page-item">
                    <input type="button" class="page-link"
                        value="{{ pagina_cancelado.paginator.num_pages }}"
                        hx-get="{% url 'solicitudes:lista_solicitudes_comitente' %}?pagina={{ pagina_cancelado.paginator.num_pages }}"
                        hx-include="#id_buscar_nombre, #ultima-pagina"
                        hx-vals='{"tipo": "cancelado", "por_pagina": {{ pagina_cancelado.paginator.per_page }}}'
                        hx-target="#resultados-cancelado"
                        hx-indicator="#indicador-cancelado"
                    >
                </li>
            {% endif %}
        </ul>
        <p>
            Página {{ pagina_cancelado.number }} de {{ pagina_cancelado.paginator.num_pages }}
        </p>
    </div>
</div>